#+TITLE: CREATE CLEAN COFFEE AND CHARDONNAY CORPORA
#+AUTHOR: Marcus Birkenkrahe
#+SUBTITLE: Digital Humanities DSC 105 Spring 2023
#+STARTUP:overview hideblocks indent inlineimages
#+OPTIONS: toc:nil num:nil ^:nil
#+PROPERTY: header-args:R :session *R* :results output :exports both :noweb yes
* README

- Download coffee.csv and chardonnay.csv from GitHub to your PC:
  1) [[https://raw.githubusercontent.com/birkenkrahe/tm/main/data/coffee.csv][raw.githubusercontent.com/birkenkrahe/tm/main/data/coffee.csv]]
  2) 

* Corpus creation: coffee tweets and sample content
  #+begin_src R
    library(tm)
    coffee_df <- read.csv("~/Downloads/coffee.csv") # dataframe
    coffee_vec <- coffee_df$text # vector
    coffee_src <- VectorSource(coffee_vec) # source
    coffee_corpus <- VCorpus(coffee_src)
    content(coffee_corpus[[998]])
  #+end_src

  #+RESULTS:
  : [1] "How often do you drink coffee? ? Almost everyday when school's in session. http://t.co/tBZkbvyg1C"

* Corpus creation: Chardonnay (wine) tweets and sample content
  #+begin_src R
    library(tm)
    chardonnay_df <- read.csv("~/Downloads/chardonnay.csv") # dataframe
    chardonnay_vec <- chardonnay_df$text # vector
    chardonnay_src <- VectorSource(chardonnay_vec) # source
    chardonnay_corpus <- VCorpus(chardonnay_src)
    content(chardonnay_corpus[[998]])
  #+end_src

  #+RESULTS:
  : [1] "Sorry why did I need a glass of Chardonnay"
- Define and run function to clean coffee corpus:
  #+name: clean_coffee_corpus
  #+begin_src R :results silent
    clean_coffee_corpus <- function(corpus) {
      corpus <- tm_map(corpus,
                       removePunctuation)
      corpus <- tm_map(corpus,
                       content_transformer(tolower))
      corpus <- tm_map(corpus,
                       removeWords,
                       words = c(stopwords("en"), "coffee"))
      corpus <- tm_map(corpus,
                       stripWhitespace)
      return(corpus)
    }
    clean_coffee <- clean_coffee_corpus(coffee_corpus)
  #+end_src
- Define and run function to clean chardonnay corpus:
  #+name: clean_chardonnay_corpus
  #+begin_src R :results silent
    clean_chardonnay_corpus <- function(corpus) {
      corpus <- tm_map(corpus,
                       removePunctuation)
      corpus <- tm_map(corpus,
                       content_transformer(tolower))
      corpus <- tm_map(corpus,
                       removeWords,
                       words = c(stopwords("en"), "chardonnay"))
      corpus <- tm_map(corpus,
                       stripWhitespace)
      return(corpus)
    }
    clean_chardonnay <- clean_chardonnay_corpus(chardonnay_corpus)
  #+end_src
- Check the results: R objects and print original and cleaned tweet:
  #+begin_src R
    <<clean_coffee_corpus>>
    <<clean_chardonnay_corpus>>
    content(coffee_corpus[[999]])
    content(clean_coffee[[999]])
    content(chardonnay_corpus[[994]])
    content(clean_chardonnay[[994]])
  #+end_src

  #+RESULTS:
  : [1] "First morning coffee after Ramadan http://t.co/ZEu6cl9qGY"
  : [1] "first morning ramadan httptcozeu6cl9qgy"
  : [1] "Climbing Mera Peak in Nepal and having a glass of Chardonnay with my wife and close friends #BucketList"
  : [1] "climbing mera peak nepal glass wife close friends bucketlist"
